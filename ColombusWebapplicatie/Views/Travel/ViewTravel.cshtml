@model ColombusWebapplicatie.Models.Travel.Travel

@{
    ViewBag.Title = "Reisoverzicht";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
<script>
    function initialize() {
        @if(Model.Locations.Count > 0) {
            <text>
            var myFirstLatlng = new google.maps.LatLng(@Model.Locations[0].LocationDetails.Coordinates.Latitude, @Model.Locations[0].LocationDetails.Coordinates.Longitude);
            var mapOptions = {
                zoom: 5,
                center: myFirstLatlng
            }
            var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
            </text>
            foreach(var location in Model.Locations) {
                <text>
                var myLatlng = new google.maps.LatLng(@location.LocationDetails.Coordinates.Latitude, @location.LocationDetails.Coordinates.Longitude);
                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    title: '@location.LocationDetails.Name'
                });
                </text>
            }
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    }
</script>    

<div class="white-block">
    <div class="container">
        <h2>Reistitel</h2>
        <div>
            <span>Begindatum: @Model.StartDate.Day-@Model.StartDate.Month-@Model.StartDate.Year</span>
            <span>Einddatum: @Model.EndDate.Day-@Model.EndDate.Month-@Model.EndDate.Year</span>
        </div>
        <h3>Locaties</h3>
    </div>
    <div id="map-canvas"></div> <!-- Google Maps -->
    <div class="container">
        <div class="button orange">@Html.ActionLink("Locatie Toevoegen", "SearchLocation", new { travelID = Model.ID })</div>
        @if(Model.Locations.Count > 0) {
            <ul>
                @foreach(var location in Model.Locations) {
                    <li>
                        <h4>@location.LocationDetails.Name</h4>
                        <div class="travel-details">
                            @if(location.Note.IsEmpty() == false) {
                                <div class="travel-note">@location.Note</div>
                            }
                            @if(location.LocationDetails.Address.IsEmpty() == false) {
                                <div class="travel-detail">@location.LocationDetails.Address</div>
                            }
                            @if(location.LocationDetails.PhoneNumber.IsEmpty() == false) {
                                <div class="travel-detail">Tel.: @location.LocationDetails.PhoneNumber</div>
                            }
                        </div>
                    </li>
                }
            </ul>
        }
    </div>
</div>